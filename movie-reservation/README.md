# 02 객체지향 프로그래밍

## 1. 영화 예매 시스템
### 요구사항
- 영화는 제목, 상영시간, 가격 정보와 같은 기본 정보를 가진다.
- 상영은 실제로 관객들이 영화를 관람하는 시간으로 상영 일자, 시간, 순번과 같은 정보를 가진다.
  - 관객은 영화가 아닌 상영되는 영화를 관람할 권리에 돈을 지불한다.
</br></br>
- 할인액을 결정하는 두 가지 규칙, 할인 조건(discount condition)과 할인 정책(discount policy)이 존재한다. 
  - 할인 조건은 가격의 할인 여부를 결정하며 순서 조건과 기간 조건 두 종류로 나뉜다.
    - 순서 조건(sequence condition)은 상영 순번을 이용해 할인 여부를 결정하는 규칙이다.
    - 기간 조건(period condition)은 영화 상영 시작 시간을 이용해 할인 여부를 결정하는 규칙으로,
      기간 조건에는 요일, 시작 시간, 종료 시간 세 부분으로 구성된다.
  - 할인 정책은 할인 요금을 결정하며 금액 할인 정책(amount discount policy)과 비율 할인 정책(percent discount policy)이 있다.
    - 금액 할인 정책은 예메 요금에서 일정 금액을 할인해주는 방식이다.
    - 비율 할인 정책은 정가에서 일정 비율의 요금을 할인해 주는 방식이다.
- 영화별로 최대 하나의 할인 정책만 할당할 수 있다.
- 할인 조건은 하나의 영화에 다수의 할인 조건을 지정할 수 있다.
</br></br>
## 2. 객체지향 프로그래밍을 향해
### 협력, 객체, 클래스
- 첫째, 어떤 클래스가 필요한지를 고민하기 전에 어떤 객체들이 필요한지 고민해야 한다.
  - 클래스는 공통적인 상태와 행동을 공유하는 객체들을 추상화한 것이다.
  - 객체들의 상태와 행동을 결정해야 클래스의 윤곽을 잡을 수 있다.
</br></br>
- 둘째, 객체를 독립적인 존재가 아니라 기능을 구현하기 위해 협력하는 공동체의 일원으로 봐야 한다.
  - 객체는 홀로 존재하는 것이 아니라, 다른 객체에게 도움을 주거나 의존하면서 살아가는 협력적인 존재이다.
</br></br>
### 도메인 구조를 따르는 프로그램 구조
- 도메인(domain)은 문제를 해결하기 위해 사용자가 프로그램을 사용하는 분야를 말한다.
- 객체지향 프로그래밍에서는 요구사항과 프로그램을 객체라는 동일한 관점에서 바라볼 수 있기 때문에,
  도메인을 구성하는 개념들이 프로그램의 객체와 클래스로 매끄럽게 연결될 수 있다.
</br></br>
### 클래스 구현하기
- 클래스의 내부와 외부의 경계를 명확하게 해서 객체의 자율성을 보장하고, 프로그래머에게 구현의 자유를 제공한다.
#### 자율적인 객체
- 첫째, 객체는 상태(state)와 행동(behavior)을 함께 가지는 복합적인 존재이다.
- 둘째, 객체는 스스로 판단하고 행동하는 자율적인 존재이다.
</br></br>
- 객체지향 프로그래밍은 캡슐화(encapsulation)와 접근 제어(access control) 메커니즘을 제공한다.
  - 데이터와 기능을 객체 내부로 함께 묶는 것을 캡슐화라고 한다.
  - 접근 제어 메커니즘을 통해 외부에서의 접근을 통제한다.
    - 이를 위해 public, protected, private과 같은 접근 수정자(access modifier)를 제공한다.
    - 객체 내부에 대한 접근을 통제하는 이유는 외부의 간섭을 최소화해 객체를 자율적인 존재로 만들기 위해서이다.
</br></br>
- 캡슐화와 접근 제어는 객체를 퍼블릭 인터페이스(public interface)와 구현(implementation) 두 부분으로 나눈다.
  - 퍼블릭 인터페이스는 외부에서 접근 가능한 부분이다.
  - 구현은 외부에서는 접근 불가능하고 오직 내부에서만 접근 가능한 부분이다.
- 인터페이스와 구현의 분리(separation of interface and implementation) 원칙은 객체지향 프로그램을 만들기 위한 핵심 원칙이다.
</br></br>
- 일반적으로 객체의 상태는 숨기고 행동만 외부에 공개한다.
- 즉, 클래스의 속성은 private으로 선언해서 감추고, 외부에 제공해야 하는 일부 메서드만 public으로 선언한다.
- 만약 내부에서만 접근 가능해야 하는 메서드가 존재한다면 protected나 private으로 지정한다.
- 이때, 퍼블릭 인터페이스에는 public으로 지정된 메서드만 포함되고, 나머지는 모두 구현에 해당한다.
</br></br>
#### 프로그래머의 자유
- 프로그래머의 역할은 클래스 작성자(class creator)와 클라이언트 프로그래머(client programmer)로 구분할 수 있다.
- 클래스 작성자는 새로운 데이터 타입을 프로그램에 추가하고, 이를 클라이언트 프로그래머가 사용한다.
- 클래스 작성자는 접근 제어 메커니즘을 통해 클라이언트 프로그래머가 숨겨진 부분에 접근해 영향을 주는 것을 막아준다.
  - 이를 구현 은닉(implementation hiding)이라고 한다.
</br></br>
- 구현 은닉의 장점
  - 클래스 작성자는 인터페이스를 바꾸지 않는 한 외부에 미치는 영향을 걱정하지 않고 내부 구현을 변곃할 수 있다.
  - 클라이언트 프로그래머가 알아야 할 지식의 양이 줄어든다.